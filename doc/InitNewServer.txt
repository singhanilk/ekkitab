Apache Server Configuration

(1)     Turning On Rewrite:

        The following must be present, suitably modified for the domain name.

        RewriteEngine On
        RewriteCond %{HTTP_HOST}    !^www\.ekkitab\.co\.in
        RewriteCond %{HTTP_HOST}    !^$
        RewriteRule ^/(.*)          http://www.ekkitab.co.in/$1

(2)     Setting the document root:

        DocumentRoot /var/www

(3)     The following must be set to allow .htaccess overrides.
        Note: AllowOverride is set to ALL
              Options does not contain INDEXES

        <Directory /var/www/>
                Options FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

(4)     The following symbolic link must be present in
        the directory: /etc/apache2/mods-enabled
    
        rewrite.load --> ../mods-available/rewrite.load
        expires.load --> ../mods-available/expires.load

(5)     Setting Expiry on page resources 
        Ensure the following is in the site specific configuration file:

        <Directory /var/www/>
                ExpiresActive On
                ExpiresDefault A300
                ExpiresByType text/html "access plus 1 day"
                ExpiresByType text/css "access plus 1 day"
                ExpiresByType text/javascript "access plus 1 day"
                ExpiresByType image/gif "access plus 1 month"
                ExpiresByType image/jpg "access plus 1 month"
                ExpiresByType image/png "access plus 1 month"
                ExpiresByType application/x-shockwave-flash "access plus 1 day"
        </Directory>


Tomcat Configuration

(1)     Turn off Tomcat security.

        TOMCAT6_SECURITY=no
(2)     Increase Java heap size for Tomcat process
        set the following: "-Xms512M -Xmx4096M" to the JAVA_OPTS variable.

MySQL Configuration

(1)     The following must be set in the file my.cnf 
        in the mysqld section of the configuration file.

        datadir         = /mnt3/mysql 

        Also add the following in the appropriate place:
        innodb_buffer_pool_size = 64M

        After setting the above, the following must be 
        executed.

        Edit the file, /etc/apparmor.d/usr.sbin.mysqld, and change the lines shown commented
        below to the equivalent correct lines.
 
        #  /var/lib/mysql/ r,
        #  /var/lib/mysql/** rwk,
           /mnt3/mysql/ r,
           /mnt3/mysql/** rwk,

        Force the apparmor daemon to reload the configuration
        by executing the following:

        sudo /etc/init.d/apparmor reload

(2)     Turn on Query caching

        Add the following lines to the configuration file (my.cnf)
        under the mysqld section.

        query_cache_type=1 
        query_cache_size=64M 

PHP5 Configuration

(1)    Change the following line in the config files as follows:

       allow_url_include = On

       The config files are:
       /etc/php5/cli/php.ini
       /etc/php5/apache2/php.ini

SET UP MEMORY FILE SYSTEM FOR cache and session

(1)   Add the following lines to the /etc/fstab file:
      (expand $EKKITAB_HOME before addding the lines. It is only a placeholder here.)
      tmpfs $EKKITAB_HOME/magento/var/cache/ tmpfs size=256,mode=0744 0 0
      tmpfs $EKKITAB_HOME/magento/var/session/ tmpfs size=64,mode=0744 0 0

(2)   To get the above effective without restarting the server, execute the script
      $EKKITAB_HOME/bin/initmemcache.sh


LOCAL CHANGES

(1)   Set the soft link:
      ln -s /mnt3/magento_product_images $EKKITAB_HOME/magento/media/catalog/product 
(2)   cp $EKKITAB_HOME/magento/app/local.xml.ekkitab $EKKITAB_HOME/magento/app/local.xml
